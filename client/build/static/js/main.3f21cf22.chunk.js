(this.webpackJsonptriplan=this.webpackJsonptriplan||[]).push([[0],{116:function(e,t){},159:function(e,t,a){e.exports=a(186)},177:function(e,t){},181:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(112),i=a(31),c=a(94),l=a(201),o=a(62),s=a(135),m={changePage:function(e,t){e.setState(Object(o.a)({},e.state,{page:t}))},authModalSwitch:function(e,t){e.setState(Object(o.a)({},e.state,{authModal:t}))},setUser:function(e,t){e.setState(Object(o.a)({},e.state,{user:t}))}},u=Object(s.a)(n,{page:"MY PLAN",authModal:null,user:null},m),A=a(113),d=a.n(A),p=a(136),h=a(68),v=a(102),g=a(37),E=a.n(g),B={Running:"images/shoe_icon.svg",Cycling:"images/bike_icon.svg",Swimming:"images/swim_icon.svg"},y=function(e){var t=B[e.activity.activityType];return n.createElement("div",{className:"activity"},n.createElement("img",{src:t}))},f=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],C=function(){return E()().year()},w=function(){return E()().month()},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E()().month(e).daysInMonth();return Array.from({length:Math.max(a-(t-1),0)},(function(e,a){return t+a})).map((function(t){return new Date(E()().year(),e,t)}))},b=function(){return E()().month(E()().month()-1).daysInMonth()},N=function(){var e=E()().year(C()).month(w()).date(1).isoWeekday()-1,t=E()().year(C()).month(w()).date(E()().daysInMonth()).isoWeekday()-1,a=function(e){var t=b()-e+1;return D(E()().month()-1,t)}(e),n=D(E()().month()),r=D(E()().month()+1,1,6-t),i=a.concat(n).concat(r);return Array.from({length:i.length/7},(function(e,t){return 0+t})).map((function(e,t){return i.slice(7*t,7*(t+1))}))},x=E()().format("MMMM"),k=E()().format("YYYY"),T=function(e){var t=[{activityType:"Cycling",date:new Date(2020,4,7),description:"Ride 20 km"},{activityType:"Running",date:new Date(2020,4,7),description:"Run 10 km Zone2"},{activityType:"Swimming",date:new Date(2020,4,12),description:"Swim 1 km"},{activityType:"Cycling",date:new Date(2020,4,16),description:"Ride 40 km"}];return n.createElement("div",{className:"calendarContainer"},n.createElement("div",{className:"month"},x),n.createElement("div",{className:"year"},k),n.createElement("img",{className:"leftArrow",src:"images/left_arrow.svg"}),n.createElement("div",{className:"calendar"},n.createElement("table",null,n.createElement("thead",null,n.createElement("tr",null,f.map((function(e){return n.createElement("th",{key:e},n.createElement("div",{className:"dowContainer"},e))})))),n.createElement("tbody",null,N().map((function(e){return n.createElement("tr",{key:e.toString()},e.map((function(e){return t.filter((function(t){return t.date.getTime()===e.getTime()})).length>0?n.createElement("td",{key:e.getDate()},e.getDate(),n.createElement("div",{className:"activitiesContainer"},t.filter((function(t){return t.date.getTime()===e.getTime()})).map((function(e){return n.createElement(y,{activity:e})})))):n.createElement("td",{key:e.getDate()},e.getDate())})))}))))),n.createElement("img",{className:"rightArrow",src:"images/left_arrow.svg"}))},j=function(e){var t={running:"images/shoe_icon.svg",triathlon:"images/swim_icon.svg"};return n.createElement("div",{className:"plans"},n.createElement("div",{className:"plan"},n.createElement("div",{className:"newPlan"},n.createElement("img",{style:{width:"2vw",height:"2vw"},src:"images/plus.svg"})),n.createElement("p",{style:{color:"#3D425E"}},"add plan")),[{name:"ironman 70.3",length:16,isActive:!0,type:"triathlon"},{name:"ironman 70.3",length:24,isActive:!1,type:"triathlon"},{name:"marathon",length:22,isActive:!1,type:"running"}].map((function(e){return n.createElement("div",{key:e.name,className:"plan"},n.createElement("img",{style:{width:"5vw",height:"5vw"},src:t[e.type]}),n.createElement("p",{className:"planLabel"},e.name),n.createElement("p",{className:"planLabel",style:{color:"#3D425E"}},e.length," weeks"," "))})))},S=a(198),G=a(144),M=a(200),F=(a(176),function(e){var t=[{name:"random-name",color:[255,107,0],path:e.path}],a=Object(n.useState)({width:"100%",height:900,latitude:0,longitude:0,zoom:2}),r=Object(i.a)(a,2),c=(r[0],r[1],[new M.a({id:"path-layer",data:t,getWidth:function(e){return 3},getColor:function(e){return e.color},widthMinPixels:3})]);return n.createElement(S.a,{initialViewState:{longitude:e.path[0][0],latitude:e.path[0][1],zoom:12},controller:!0,layers:c,style:{position:"relative",width:"25vw",height:"25vw"}},n.createElement(G.a,{mapStyle:"mapbox://styles/mapbox/dark-v10",mapboxApiAccessToken:'"pk.eyJ1Ijoic29uYWMiLCJhIjoiY2s4MjM0amJoMDI4aTNnbzRqY3R0c3hqOCJ9.Wq8z3oRGCEjfddpHRQ92JA"'}))}),O=a(140),_=function(e){var t=e.activity;return n.createElement("div",{className:"activityWithMap",style:{margin:"3vw"}},n.createElement("p",{style:{fontWeight:"bold",fontSize:"2em",fontFamily:"Soulmaze",alignSelf:"flex-end",textAlign:"center",marginBottom:"0"}},t.activityType.toLocaleUpperCase()),n.createElement("img",{className:"icon",style:{gridColumn:"1",gridRow:"3 / 3"},src:{Run:"images/shoe_icon.svg",Bike:"images/bike_icon.svg",Swim:"images/swim_icon.svg"}[t.activityType]}),n.createElement("p",{style:{gridColumn:"2",gridRow:"1",alignSelf:"flex-end"}},t.distance/1e3," km"),n.createElement("p",{style:{gridColumn:"3",gridRow:"1",alignSelf:"flex-end"}},"171 HR"),n.createElement("p",{style:{gridColumn:"2",gridRow:"2"}},"5.49 m/km"),n.createElement("p",{style:{gridColumn:"3",gridRow:"2"}},"29 m 26s"),n.createElement("p",{style:{gridColumn:"4 / 4",gridRow:"2 / 3",fontFamily:"Soulmaze Brush",fontSize:"3em",marginTop:"0",marginBottom:"0"}},E()(new Date(t.startDate)).format("DD MMM")),n.createElement("div",{className:"activityMap"},n.createElement(F,{path:O.decode(t.mapPolyline).map((function(e){return function(e){return[e[1],e[0]]}(e)}))})))},R=function(e){var t=Object(n.useState)([{id:3201623101,distance:5007.2,movingTime:1635,elapsedTime:1645,activityType:"Run",startDate:"2020-03-20T22:16:15",averageSpeed:3.063,averageWatts:0,mapPolyline:"awj_IcbkpAAC?Bc@Bk@Gc@CyAF[Cs@J[JoBKw@Qg@@g@HyC?g@GGKAQMq@eAs@g@{@i@kAa@uBi@eCO}@Eu@DiDc@k@GaAEqBHwAGaCKs@C}@DsBIeED}@CcCI{@A{@@uJGaA@e@NcCF{BEy@M}@EaEG_AYw@_@u@Qw@G_AHgDG}B@_AC}@@aCAaA[_EA}BCcAByAbAuBRw@J{@NyBAaAG}@A_AD_A^a@EaAG{@?aALy@AaAYw@M_A?{@~@I|B]x@Ed@EnA?h@BjAVhALnAFf@Af@Ff@EZDVr@BdAA~@JzBd@rD?`CJxDF~@Nx@RnB?jBAd@HzB?pBD~@XrARr@Fh@@t@ETAl@DxCLzB?`APzBB`AZxBVzFl@pHAr@Kh@SVT`FJ|@ZrBRtBDx@D~@BvBXhMPv@PnAF`Ar@fFTv@D|BH~@C|@D~@ZxDJv@L|BEh@e@FmAHe@?g@Be@AoBBmAC"},{id:3201623102,distance:5007.2,movingTime:1635,elapsedTime:1645,activityType:"Run",startDate:"2020-03-20T22:16:15",averageSpeed:3.063,averageWatts:0,mapPolyline:"awj_IcbkpAAC?Bc@Bk@Gc@CyAF[Cs@J[JoBKw@Qg@@g@HyC?g@GGKAQMq@eAs@g@{@i@kAa@uBi@eCO}@Eu@DiDc@k@GaAEqBHwAGaCKs@C}@DsBIeED}@CcCI{@A{@@uJGaA@e@NcCF{BEy@M}@EaEG_AYw@_@u@Qw@G_AHgDG}B@_AC}@@aCAaA[_EA}BCcAByAbAuBRw@J{@NyBAaAG}@A_AD_A^a@EaAG{@?aALy@AaAYw@M_A?{@~@I|B]x@Ed@EnA?h@BjAVhALnAFf@Af@Ff@EZDVr@BdAA~@JzBd@rD?`CJxDF~@Nx@RnB?jBAd@HzB?pBD~@XrARr@Fh@@t@ETAl@DxCLzB?`APzBB`AZxBVzFl@pHAr@Kh@SVT`FJ|@ZrBRtBDx@D~@BvBXhMPv@PnAF`Ar@fFTv@D|BH~@C|@D~@ZxDJv@L|BEh@e@FmAHe@?g@Be@AoBBmAC"},{id:3201623104,distance:5007.2,movingTime:1635,elapsedTime:1645,activityType:"Run",startDate:"2020-03-20T22:16:15",averageSpeed:3.063,averageWatts:0,mapPolyline:"awj_IcbkpAAC?Bc@Bk@Gc@CyAF[Cs@J[JoBKw@Qg@@g@HyC?g@GGKAQMq@eAs@g@{@i@kAa@uBi@eCO}@Eu@DiDc@k@GaAEqBHwAGaCKs@C}@DsBIeED}@CcCI{@A{@@uJGaA@e@NcCF{BEy@M}@EaEG_AYw@_@u@Qw@G_AHgDG}B@_AC}@@aCAaA[_EA}BCcAByAbAuBRw@J{@NyBAaAG}@A_AD_A^a@EaAG{@?aALy@AaAYw@M_A?{@~@I|B]x@Ed@EnA?h@BjAVhALnAFf@Af@Ff@EZDVr@BdAA~@JzBd@rD?`CJxDF~@Nx@RnB?jBAd@HzB?pBD~@XrARr@Fh@@t@ETAl@DxCLzB?`APzBB`AZxBVzFl@pHAr@Kh@SVT`FJ|@ZrBRtBDx@D~@BvBXhMPv@PnAF`Ar@fFTv@D|BH~@C|@D~@ZxDJv@L|BEh@e@FmAHe@?g@Be@AoBBmAC"},{id:3201623103,distance:5007.2,movingTime:1635,elapsedTime:1645,activityType:"Run",startDate:"2020-03-20T22:16:15",averageSpeed:3.063,averageWatts:0,mapPolyline:"awj_IcbkpAAC?Bc@Bk@Gc@CyAF[Cs@J[JoBKw@Qg@@g@HyC?g@GGKAQMq@eAs@g@{@i@kAa@uBi@eCO}@Eu@DiDc@k@GaAEqBHwAGaCKs@C}@DsBIeED}@CcCI{@A{@@uJGaA@e@NcCF{BEy@M}@EaEG_AYw@_@u@Qw@G_AHgDG}B@_AC}@@aCAaA[_EA}BCcAByAbAuBRw@J{@NyBAaAG}@A_AD_A^a@EaAG{@?aALy@AaAYw@M_A?{@~@I|B]x@Ed@EnA?h@BjAVhALnAFf@Af@Ff@EZDVr@BdAA~@JzBd@rD?`CJxDF~@Nx@RnB?jBAd@HzB?pBD~@XrARr@Fh@@t@ETAl@DxCLzB?`APzBB`AZxBVzFl@pHAr@Kh@SVT`FJ|@ZrBRtBDx@D~@BvBXhMPv@PnAF`Ar@fFTv@D|BH~@C|@D~@ZxDJv@L|BEh@e@FmAHe@?g@Be@AoBBmAC"}]),a=Object(i.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){fetch("/api/user/asumko").then((function(e){return e.json()})).then((function(e){return c(e.activities)})).catch((function(e){return console.error(e)}))}),[]),null===r?n.createElement("div",null,"Activities are loading"):n.createElement("div",{className:"allActivitiesWithMap"},r.filter((function(e){return e.mapPolyline.length>0})).slice(0,5).map((function(e){return n.createElement(_,{key:e.id,activity:e})})))},J=function(e){var t=u(),a=Object(i.a)(t,2),r=a[0],c=(a[1],Object(l.a)(["auth"])),o=Object(i.a)(c,3),s=o[0];o[1],o[2];if(null===r.user)return n.createElement("div",{style:{color:"white"}},"Sign in to view your activities");return n.createElement("div",{className:"userActivities"},r.user.connectedToStrava?n.createElement("div",{className:"activitiesBody"},n.createElement(R,null)):n.createElement("div",{className:"connectToStrava",style:{textAlign:"center",color:"white",fontSize:"2em",borderRadius:"5em",backgroundColor:"#fc5200",display:"flex",justifyContent:"center",marginLeft:"45vw",marginRight:"45vw"},onClick:function(){fetch("/api/v1/strava/authorize",{method:"GET",headers:{Authorization:"Bearer "+s.apiKey},redirect:"follow"}).then((function(e){console.log("redirected")}))}},"Connect to Strava"))};a(181);var I={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",width:"30%",height:"30vw",transform:"translate(-50%, -50%)",backgroundColor:"#1e202c",fontFamily:"Roboto Mono",color:"white",border:0,boxShadow:"inset 4px 4px 12px #3A3F5E, inset -4px -4px 12px #000000",borderRadius:"2em"}};v.setAppElement("#root");var L=function(e){var t=u(),a=Object(i.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)({email:"",password:""}),m=Object(i.a)(s,2),A=m[0],g=m[1],E=Object(n.useState)(!1),B=Object(i.a)(E,2),y=B[0],f=B[1],C=Object(l.a)(["auth"]),w=Object(i.a)(C,3),D=(w[0],w[1]),b=(w[2],Object(n.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="SIGN UP"===t?"register":"login",!y){e.next=3;break}return e.abrupt("return");case 3:return f(!0),e.next=6,fetch("/api/v1/user/".concat(n),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)}).then((function(e){return e.json().then((function(e){c.authModalSwitch(null),D("apiKey",e.apiKey)}))})).catch((function(e){return console.error(e)}));case 6:f(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[y])),N=function(e,t){"email"===t&&g(Object(o.a)({},A,{email:e.target.value})),"password"===t&&g(Object(o.a)({},A,{password:e.target.value}))};return v.defaultStyles.overlay.backgroundColor="rgba(0, 0, 0, 0)",n.createElement("div",{className:"body"},n.createElement(h.c,null,n.createElement(h.a,{path:"/my-plan"},n.createElement(T,null)),n.createElement(h.a,{path:"/plans"},n.createElement(j,null)),n.createElement(h.a,{path:"/my-activities"},n.createElement(J,null)),n.createElement(h.a,{path:"/"},n.createElement("div",null,"hey body"))),n.createElement(v,{isOpen:null!==r.authModal,onRequestClose:function(){return c.authModalSwitch(null)},style:I,backdropOpacity:0,contentLabel:"Auth"},n.createElement("div",{className:"modalContent"},n.createElement("p",{className:"valid",style:{display:"none"}},"Valid. Please wait"),n.createElement("p",{className:"error",style:{display:"none"}},"Error. Please fix your inputs"),n.createElement("div",{className:"label"},"E-mail"),n.createElement("input",{type:"text",id:"username",onChange:function(e){return N(e,"email")}}),n.createElement("div",{className:"label"},"Password"),n.createElement("input",{type:"password",id:"password",onChange:function(e){return N(e,"password")}}),n.createElement("button",{id:"submit",onClick:function(){return b(r.authModal,A)}},r.authModal))))};a(184);var P=function(e){var t=Object(h.f)(),a=u(),r=Object(i.a)(a,2),c=r[0],o=r[1],s=Object(n.useState)(t.location.pathname.toLocaleUpperCase().replace("/","").replace("-"," ")),m=Object(i.a)(s,2),A=m[0],d=m[1],p=Object(l.a)(["auth"]),v=Object(i.a)(p,3),g=(v[0],v[1],v[2]),E=function(e){d(e),t.push(e.toLocaleLowerCase().replace(/ /g,"-"))},B=null===c.authModal?"inset":"";return n.createElement("div",{className:"header"},n.createElement("div",{className:"current"},A),c.user?n.createElement("div",{className:"authBlock"},n.createElement("div",{className:"logoutButton",onClick:function(){return g("auth")}},"LOGOUT")):n.createElement("div",{className:"authBlock"},n.createElement("div",{className:"signUpButton",onClick:function(){return o.authModalSwitch("SIGN UP")}},"SIGN UP"),n.createElement("div",{className:"loginButton",style:{boxShadow:"".concat(B," 4px 4px 12px #363a4f, ").concat(B," -4px -4px 12px #000000")},onClick:function(){return o.authModalSwitch("LOGIN")}},"LOGIN")),n.createElement("div",{className:"navBar"},n.createElement("div",{className:"navItem",onClick:function(){return E("PLANS")}},"PLANS"),n.createElement("div",{className:"navItem"},"/"),n.createElement("div",{className:"navItem",onClick:function(){return E("MY ACTIVITIES")}},"MY ACTIVITIES"),n.createElement("div",{className:"navItem"},"/"),n.createElement("div",{className:"navItem",onClick:function(){return E("MY PLAN")}},"MY PLAN")))};a(185);var z=function(e){var t=Object(l.a)(["auth"]),a=Object(i.a)(t,3),r=a[0],o=(a[1],a[2]),s=u(),m=Object(i.a)(s,2),A=(m[0],m[1]);return r&&Object(n.useEffect)((function(){fetch("/api/v1/user",{method:"GET",headers:{Authorization:"Bearer "+r.apiKey}}).then((function(e){200===e.status?e.json().then((function(e){console.log(e),A.setUser(e)})):o("auth")})).catch((function(e){return console.error(e)}))}),[]),n.createElement(c.a,null,n.createElement("div",{className:"app"},n.createElement(P,null),n.createElement(L,null)))};r.render(n.createElement(z,null),document.getElementById("root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.3f21cf22.chunk.js.map